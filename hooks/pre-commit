#!/usr/bin/env bash
set -e

echo "Running pre-commit checks..."

# Run cargo fmt check
echo "ğŸ“ Checking code formatting..."
if ! cargo fmt --all --check; then
    echo ""
    echo "âŒ Code formatting check failed!"
    echo "Run 'just fmt' or 'cargo fmt --all' to fix formatting issues."
    exit 1
fi
echo "âœ“ Code formatting is correct"

# Run clippy
echo ""
echo "ğŸ” Running clippy linter..."
if ! cargo clippy --workspace -- -D warnings; then
    echo ""
    echo "âŒ Clippy found issues!"
    echo "Fix the warnings above before committing."
    exit 1
fi
echo "âœ“ Clippy checks passed"

echo ""
echo "âœ… All pre-commit checks passed!"
